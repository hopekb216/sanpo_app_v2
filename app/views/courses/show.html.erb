<div class="container mt-5" style="max-width: 380px;">

  <!-- タイトル -->
  <h2 class="text-center mb-3"><%= @course.title %></h2>

  <!-- 投稿者 -->
  <p class="text-muted mb-1">
    投稿者：<%= @course.user.username %>
  </p>

  <!-- 投稿日時 -->
  <p class="text-muted small mb-3">
    投稿日時：<%= @course.created_at.strftime("%Y-%m-%d %H:%M") %>
  </p>

  <!-- メイン画像 -->
  <div class="mb-3">
    <% if @course.image.attached? %>
      <%= image_tag @course.image, class: "img-fluid rounded" %>
    <% else %>
      <%= image_tag "default_course.png", class: "img-fluid rounded" %>
    <% end %>
  </div>

  <!-- 投稿情報 -->
  <div class="mb-3">
    <p><strong>距離：</strong><%= @course.distance %> km</p>
    <p><strong>時間：</strong><%= @course.duration %> 分</p>
    <p><strong>説明：</strong><%= simple_format(@course.description) %></p>
  </div>

  <!-- コメント一覧（表示のみ） -->
  <h5 class="mt-4 mb-2">コメント</h5>

  <% if @course.comments.any? %>
    <% @course.comments.each do |comment| %>
      <div class="border rounded p-2 mb-2">
        <strong><%= comment.user.username %></strong>
        <p class="mb-0"><%= comment.body %></p>
      </div>
    <% end %>
  <% else %>
    <p class="text-muted">コメントはまだありません。</p>
  <% end %>

  <!-- ボタン -->
  <div class="mt-4">

    <% if user_signed_in? && @course.user == current_user %>
      <div class="d-flex gap-2 mb-3">
        <%= link_to t("courses.show.edit"), edit_course_path(@course), class: "btn btn-primary w-50" %>
        <%= link_to t("courses.show.delete"), @course,
              data: { turbo_method: :delete, turbo_confirm: "削除しますか？" },
              class: "btn btn-danger w-50" %>
      </div>
    <% end %>

    <% if @course.user == current_user %>
      <!-- 自分の投稿 → マイページへ -->
      <%= link_to "一覧に戻る", mypage_path, class: "btn btn-secondary w-100" %>
    <% else %>
      <!-- 他人の投稿 → その人のプロフィールへ -->
      <%= link_to "一覧に戻る", user_path(@course.user), class: "btn btn-secondary w-100" %>
    <% end %>

  </div>

</div>
