<div class="container mt-5" style="max-width: 380px;">

  <!-- タイトル -->
  <h2 class="text-center mb-3"><%= @course.title %></h2>

  <!-- 投稿者 -->
  <p class="text-muted mb-1">
    <%= t("courses.show.author") %>：<%= @course.user.username %>
  </p>

  <!-- 投稿日時 -->
  <p class="text-muted small mb-3">
    <%= t("courses.show.posted_at") %>：<%= @course.created_at.strftime("%Y-%m-%d %H:%M") %>
  </p>

  <!-- メイン画像 -->
  <div class="mb-3">
    <% if @course.image.attached? %>
      <%= image_tag @course.image, class: "img-fluid rounded" %>
    <% else %>
      <%= image_tag "default_course.png", class: "img-fluid rounded" %>
    <% end %>
  </div>

  <!-- 投稿情報 -->
  <div class="mb-3">
    <p><strong><%= t("courses.show.distance") %>：</strong><%= @course.distance %> km</p>
    <p><strong><%= t("courses.show.duration") %>：</strong><%= @course.duration %> <%= t("courses.show.minutes") %></p>
    <p><strong><%= t("courses.show.description") %>：</strong><%= simple_format(@course.description) %></p>
  </div>

  <!-- コメント一覧 -->
  <h5 class="mt-4 mb-2"><%= t("courses.show.comments_title") %></h5>

  <% if @course.comments.any? %>
    <% @course.comments.each do |comment| %>
      <div class="border rounded p-2 mb-2">
        <strong><%= comment.user.username %></strong>
        <p class="mb-0"><%= comment.body %></p>
      </div>
    <% end %>
  <% else %>
    <p class="text-muted"><%= t("courses.show.no_comments") %></p>
  <% end %>

  <!-- ボタン -->
  <div class="mt-4">

    <% if user_signed_in? && @course.user == current_user %>
      <div class="d-flex gap-2 mb-3">
        <%= link_to t("courses.show.edit"), edit_course_path(@course), class: "btn btn-primary w-50" %>
        <%= link_to t("courses.show.delete"), @course,
              data: { turbo_method: :delete, turbo_confirm: t("courses.show.confirm_delete") },
              class: "btn btn-danger w-50" %>
      </div>
    <% end %>

    <%= link_to t("courses.show.back_to_list"), root_path, class: "btn btn-secondary w-100" %>

  </div>

</div>
